sap.ui.define(["sap/ui/core/mvc/ControllerExtension"],function(e){"use strict";return e.extend("masterdata1.ext.controller.MasterObjectPAgeController",{override:{onInit:function(){var e=this.base.getExtensionAPI().getModel()},routing:{onAfterBinding:async function(e){debugger;try{var t=window.location.href;var a=t.match(/IsActiveEntity=([^)]*)/);var s=a?a[1]:null;var r=sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::CustomSubSection::Attachaments--uploadSet");var o=r.getBindingInfo("items").template;if(s=="false"){o.setVisibleRemove(true)}else{o.setVisibleRemove(false)}r.bindAggregation("items",{path:e.getPath()+"/master_newfiles",template:r.getBindingInfo("items").template,parameters:{$orderby:"createdAt desc"}});r.getBinding("items").refresh();var t=window.location.href;var a=t.match(/Masterdataid='([^']+)'/);var i=a?a[1]:null;const d=JSON.stringify({id:i});const b="funcimport";const c=this.getView().getModel().bindContext(`/${b}(...)`);c.setParameter("data",d);c.setParameter("status",JSON.stringify({status:"getmasterstatus"}));await c.execute();const l=c.getBoundContext().getValue();let g=l.value;g=JSON.parse(g);if(g.length!="0"){var n=g[0].Statusnew;if(n=="Approved"){sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::FacetSubSection::Complaince1").setVisible(true);sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::CustomSubSection::Attachaments").setVisible(true);sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::FacetSubSection::Insurance").setVisible(true)}else{sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::FacetSubSection::Complaince1").setVisible(false);sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::CustomSubSection::Attachaments").setVisible(false);sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::FacetSubSection::Insurance").setVisible(false)}if(n=="Pending for Approval"||n=="Approved"){sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::FooterBar::CustomAction::Submit").setEnabled(false);sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::FooterBar::CustomAction::Submit").setVisible(false)}if(n=="Pending for Approval"||s=="false"){sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::StandardAction::Edit").setEnabled(false);sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::StandardAction::Edit").setVisible(false)}else{sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::StandardAction::Edit").setEnabled(true);sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::StandardAction::Edit").setVisible(true)}if(s=="false"){sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::CustomSubSection::Attachaments--uploadSet").setUploadButtonInvisible(false);sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::CustomSubSection::Attachaments--uploadSet").setUploadEnabled(true);var u=sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::CustomSubSection::Attachaments--uploadSet").getItems();for(let e=0;e<u.length;e++){u[e].setVisibleEdit(true)}}else{sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::CustomSubSection::Attachaments--uploadSet").setUploadButtonInvisible(true);sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::CustomSubSection::Attachaments--uploadSet").setUploadEnabled(false);var u=sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::CustomSubSection::Attachaments--uploadSet").getItems();for(let e=0;e<u.length;e++){u[e].setVisibleEdit(false)}}}else{sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::FacetSubSection::Complaince1").setVisible(false);sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::CustomSubSection::Attachaments").setVisible(false);sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::FacetSubSection::Insurance").setVisible(false);sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::FooterBar::CustomAction::Submit").setEnabled(false);sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::FooterBar::CustomAction::Submit").setVisible(false)}}catch(e){}}},editFlow:{onAfterEdit:function(e){debugger},onBeforeEdit:function(e){debugger;sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::FooterBar::CustomAction::Submit").setEnabled(false);sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::FooterBar::CustomAction::Submit").setVisible(false);sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::CustomSubSection::Attachaments--uploadSet").setUploadButtonInvisible(false);sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::CustomSubSection::Attachaments--uploadSet").setUploadEnabled(true);var t=sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::CustomSubSection::Attachaments--uploadSet").getItems();for(let e=0;e<t.length;e++){t[e].setVisibleRemove(true);t[e].setVisibleEdit(true)}},onAfterCreate:function(e){debugger;sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::FooterBar::CustomAction::Submit").setEnabled(false);sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::FooterBar::CustomAction::Submit").setVisible(false)},onAfterSave:async function(e){debugger;sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::CustomSubSection::Attachaments--uploadSet").setUploadButtonInvisible(true);sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::CustomSubSection::Attachaments--uploadSet").setUploadEnabled(false);var t=sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::CustomSubSection::Attachaments--uploadSet").getItems();for(let e=0;e<t.length;e++){t[e].setVisibleRemove(false);t[e].setVisibleEdit(false)}let a="bpaTrigger";let s=this.getView().getModel().bindContext(`/${a}(...)`);let r="updateStatus";let o=this.getView().getModel().bindContext(`/${r}(...)`);let i=new sap.m.Dialog({title:"Success",type:"Message",content:new sap.m.Text({text:`Are You Sure You Want to Submit for Approval`}),beginButton:new sap.m.Button({type:"Accept",text:"Yes",press:async function(e,t){debugger;var a=window.location.href;var r=a.match(/Masterdataid='([^']+)'/);var n=r?r[1]:null;var u="avaneesh.u@peolsolutions.com";o.setParameter("Masterdataid",n);await o.execute();s.setParameter("Masterdataid",n);s.setParameter("Admin",u);await s.execute();window.location.reload();window.history.back();i.close()}}),endButton:new sap.m.Button({type:"Reject",text:"Cancel",press:function(e){debugger;sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::FooterBar::CustomAction::Submit").setEnabled(true);sap.ui.getCore().byId("masterdata1::MasterDataObjectPage--fe::FooterBar::CustomAction::Submit").setVisible(true);i.close()}})});i.open()},onAfterDiscard:async function(e){debugger},onBeforeDiscard:function(e){debugger}}}})});
//# sourceMappingURL=MasterObjectPAgeController.controller.js.map